(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],d=0,v=[];d<o.length;d++)s=o[d],n[s]&&v.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={1:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([30,0]),a()})({"+2KW":function(t,e,a){},"+tH8":function(t,e,a){},"/KdE":function(t,e,a){t.exports=a.p+"img/guarantee2.cb06364a.jpg"},"/uby":function(t,e,a){"use strict";var i=a("m+tX"),n=a.n(i);n.a},"0Now":function(t,e,a){},"0dXs":function(t,e,a){},"1YH8":function(t,e,a){"use strict";var i=a("r8WL"),n=a.n(i);n.a},"20M+":function(t,e,a){},"2NrP":function(t,e,a){"use strict";var i=a("3nnI"),n=a.n(i);n.a},30:function(t,e,a){t.exports=a("Vtdi")},"3Gdc":function(t,e,a){},"3nnI":function(t,e,a){},"72PV":function(t,e,a){"use strict";var i=a("Chvo"),n=a.n(i);n.a},Chvo:function(t,e,a){},DLQb:function(t,e,a){},IW1Z:function(t,e,a){},K3C8:function(t,e,a){"use strict";var i=a("xwx4"),n=a.n(i);n.a},KMSu:function(t,e,a){"use strict";var i=a("0Now"),n=a.n(i);n.a},"Lw8+":function(t,e,a){t.exports=a.p+"img/guarantee1.c8172b1e.png"},M0DD:function(t,e,a){t.exports=a.p+"img/slider1.c106ab73.webp"},OtS1:function(t,e,a){},PQol:function(t,e,a){"use strict";var i=a("uLH6"),n=a.n(i);n.a},SZvj:function(t,e,a){"use strict";var i=a("+2KW"),n=a.n(i);n.a},SwYB:function(t,e,a){"use strict";var i=a("nhkA"),n=a.n(i);n.a},"Tb+F":function(t,e,a){},Vtdi:function(t,e,a){"use strict";a.r(e);a("9VmF"),a("KKXr"),a("VRzm"),a("9d8Q"),a("20M+");var i,n,r=a("Kw5r"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},o=[],c={},l=c,u=(a("72PV"),a("KHd+")),d=Object(u["a"])(l,s,o,!1,null,null,null),v=d.exports,p=a("jE9Z"),_={uinfo:function(){return JSON.parse(localStorage.getItem("uinfo"))},login:function(t){localStorage.setItem("uinfo",JSON.stringify(t))},logout:function(t){localStorage.removeItem("uinfo"),location.href=t||"/"},is_admin:function(){var t=this.uinfo();return t&&this.uinfo().is_admin},logged_in:function(){return!!this.his_id()},his_id:function(){var t=this.uinfo();return t&&this.uinfo().id}},m=r["a"].directive("focus",{inserted:function(t){t.focus()}}),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav"),t._m(0),a("div",{staticClass:"query-area"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row col-lg-8"},[a("div",{staticClass:"col-lg-3 huge-text"},[t._v("买")]),a("div",{staticClass:"col-lg-9"},[a("div",t._l(t.list.brand,function(e){return a("router-link",{key:e.id,staticClass:"tag",attrs:{to:"/search?brand_id="+e.id}},[t._v(t._s(e.name)+"\n            ")])})),t._m(1),a("div",t._l(t.list.design,function(e){return a("router-link",{key:e.id,staticClass:"tag",attrs:{to:"/search?design_id="+e.id}},[t._v(t._s(e.name)+"\n            ")])}))])]),a("div",{staticClass:"row col-lg-4"},[a("div",{staticClass:"col-lg-3 huge-text"},[t._v("卖")]),a("div",{staticClass:"col-lg-9 right"},[a("router-link",{staticClass:"btn btn-primary btn-fat",staticStyle:{"margin-top":"15px",display:"inline-block"},attrs:{to:"/publish"}},[t._v("极速卖车")])],1)])])]),t._m(2),a("div",[a("div",{staticClass:"vehicle-nav"},[a("div",{staticClass:"container"},[a("div",{staticClass:"item",on:{click:function(e){t.read_main("on_sale")}}},[t._v("特价好车")]),a("div",{staticClass:"item",on:{click:function(e){t.read_main("under_5")}}},[t._v("5万以下")]),a("div",{staticClass:"item",on:{click:function(e){t.read_main("between_5_10")}}},[t._v("5-10万")]),a("div",{staticClass:"item",on:{click:function(e){t.read_main("suv")}}},[t._v("超值SUV")]),a("div",{staticClass:"item",on:{click:function(e){t.read_main("urgent")}}},[t._v("急售降价车")]),a("router-link",{staticClass:"item",attrs:{to:"/search"}},[t._v("更多")])],1)]),a("div",{staticClass:"vehicle-list"},[a("div",{staticClass:"container"},t._l(t.main_list,function(e){return a("div",{key:e.id,staticClass:"col-lg-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"thumbnail"},[a("img",{attrs:{src:t.get_main_cover_url(e),alt:"洋洋车"}})]),a("div",{staticClass:"detail"},[a("div",{staticClass:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"desc"},[t._v(t._s(e.birthday)+" / 3.07万公里")]),a("div",{staticClass:"others"},[a("span",{staticClass:"price"},[t._v(t._s(e.price)+"万元")]),a("span",[t._v("首付3.5万")]),a("router-link",{staticClass:"btn btn primary buy",attrs:{to:"/detail/"+e.id}},[t._v("购买")])],1)])])])}))])]),a("Footer")],1)},f=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slider"},[i("img",{attrs:{src:a("M0DD")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"tag"},[t._v("3万以下")]),a("span",{staticClass:"tag"},[t._v("10万以下")]),a("span",{staticClass:"tag"},[t._v("20万以下")]),a("span",{staticClass:"tag"},[t._v("20万以下")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"guarantee"},[i("div",{staticClass:"row container"},[i("div",{staticClass:"col-lg-3"},[i("div",{staticClass:"card"},[i("div",[i("div",{staticClass:"title"},[t._v("分期购车")]),i("div",{staticClass:"desc"},[t._v("门槛低 审批快")])]),i("div",[i("img",{attrs:{src:a("Lw8+"),alt:"一张图"}})])])]),i("div",{staticClass:"col-lg-3"},[i("div",{staticClass:"card"},[i("div",[i("div",{staticClass:"title"},[t._v("购车保障")]),i("div",{staticClass:"desc"},[t._v("1年质保 14天可退")])]),i("div",[i("img",{attrs:{src:a("/KdE"),alt:"一张图"}})])])]),i("div",{staticClass:"col-lg-3"},[i("div",{staticClass:"card"},[i("div",[i("div",{staticClass:"title"},[t._v("优质售后")]),i("div",{staticClass:"desc"},[t._v("180天免费维修")])]),i("div",[i("img",{attrs:{src:a("Lw8+"),alt:"一张图"}})])])]),i("div",{staticClass:"col-lg-3"},[i("div",{staticClass:"card"},[i("div",[i("div",{staticClass:"title"},[t._v("行业认证")]),i("div",{staticClass:"desc"},[t._v("中国汽车协会认证")])]),i("div",[i("img",{attrs:{src:a("/KdE"),alt:"一张图"}})])])])])])}],g=(a("91GP"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-nav",style:{marginBottom:this.pushDown?"20px":"0"}},[a("div",{staticClass:"row container"},[a("div",{staticClass:"col left"},[a("router-link",{staticClass:"logo",attrs:{to:"/"}}),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/user"}},[t._v("管理面板")]),a("SearchBar",{attrs:{width:"50%"}})],1),a("div",{staticClass:"col right"},[t.uinfo?a("span",[a("span",{staticClass:"nav-item"},[t._v(t._s(t.uinfo.username||t.uinfo.phone))]),a("span",{staticClass:"nav-item",on:{click:function(e){t.logout("#/login")}}},[t._v("登出")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/publish"}},[t._v("发布二手车")])],1):a("span",[a("router-link",{staticClass:"nav-item",attrs:{to:"/login"}},[t._v("登录")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/signup"}},[t._v("注册")])],1)])])])}),b=[],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"search-bar",style:{width:t.width},on:{submit:function(e){e.preventDefault(),t.search(),t.submit()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.kwd,expression:"kwd"}],attrs:{type:"search",placeholder:"请输入搜索关键词，如：别克1.6L···",autocomplete:"off",autofocus:""},domProps:{value:t.kwd},on:{keyup:t.change,input:function(e){e.target.composing||(t.kwd=e.target.value)}}}),a("button",{attrs:{type:"submit"}},[t._v("搜索")])])},C=[],w={props:["width","onChange","onSubmit","keyword"],data:function(){return{kwd:""}},methods:{change:function(){this.onChange&&this.onChange(this.kwd)},submit:function(){this.onSubmit&&this.onSubmit(this.kwd)},search:function(){this.$router.push({path:"/search",query:{keyword:this.kwd}})}},watch:{keyword:function(t){this.kwd=t}}},k=w,x=(a("lXEF"),Object(u["a"])(k,y,C,!1,null,"5d06cf89",null)),$=x.exports,N={props:{pushDown:{default:!1}},components:{SearchBar:$},data:function(){return{uinfo:_.uinfo()}},methods:{logout:_.logout}},P=N,q=(a("SZvj"),Object(u["a"])(P,g,b,!1,null,"bacf85b2",null)),E=q.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[t._v("\n    Copyright © 2018, yangyanche.yo, All Rights Reserved\n")])},O=[],D={},j=D,A=(a("SwYB"),Object(u["a"])(j,S,O,!1,null,"8ad0fb90",null)),M=A.exports,F={methods:{get_main_cover_url:function(t){return t.preview&&t.preview[0]&&t.preview[0].url?t.preview[0].url:"https://i.loli.net/2018/07/06/5b3f160071a17.jpg"}}},I=F,K=Object(u["a"])(I,i,n,!1,null,null,null),L=K.exports,z=a("vDqi"),R=a.n(z),T="b766bc75ea6969373616aa2ff698e3572792d7ed6e7d4ae2dd3c95cc0f3f7578",B="http://mock.biaoyansu.com/api/1/";function J(t,e){return btoa(t+e)}function Q(t,e){var a=(new Date).getTime(),i=J(T,a),n={headers:{"biao-mock-app-key":T,"biao-mock-timestamp":a,"biao-mock-signature":i}};return t=B+t,R.a.post(t,e,n)}var H,V,G={methods:{read:function(t){var e=this;Q(t+"/read",{key_by:"name"}).then(function(a){e.$set(e.list,t,a.data.data)})}}},W=G,X=Object(u["a"])(W,H,V,!1,null,null,null),Z=X.exports,Y=(a("+tH8"),{components:{Nav:E,Footer:M},mixins:[L,Z],mounted:function(){this.read_main(),this.find_design("suv"),this.read("brand"),this.read("design")},data:function(){return{list:{},design:{},main_list:[]}},methods:{find_design:function(t){var e=this;Q("design/search",{or:{name:t}}).then(function(a){e.design[t]=a.data.data[0]})},read_main:function(t){var e=this,a={};switch(t){case"on_sale":a={where:{and:{on_sale:!0}}};break;case"under_5":a={where:{and:[["price","<","5"]]}};break;case"between_5_10":a={where:{and:[["price",">","5"],["price","<","10"]]}};break;case"suv":a={where:{and:{design_id:this.design.suv.id}}};break;case"urgent":var i=new Date;i.setDate(i.getDate()+3),i=i.toISOString().split("T")[0],a={query:'where("deadline" <= "'.concat(i,'")')};break;default:a={};break}var n={limit:8};a=Object.assign({},a,n),Q("vehicle/read",a).then(function(t){e["main_list"]=t.data.data})}}}),U=Y,tt=(a("PQol"),Object(u["a"])(U,h,f,!1,null,"812a9054",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-lg-7"},[a("div",{staticClass:"parent"},[a("div",{staticClass:"top"},[a("div",{class:"item "+("mail"==t.signup_by?"active":""),on:{click:function(e){t.signup_by="mail"}}},[t._v("邮箱注册")]),a("div",{class:"item "+("phone"==t.signup_by?"active":""),on:{click:function(e){t.signup_by="phone"}}},[t._v("手机注册")]),a("div",{staticClass:"item"},[a("router-link",{attrs:{to:"/"}},[t._v("首页")])],1)]),a("div",{staticClass:"content"},[t._m(1),a("form",{staticClass:"main-form",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.username,expression:"current.username"},{name:"validator",rawName:"v-validator",value:"required|username|not_exist:user,username|min_length:3|max_length:18",expression:"'required|username|not_exist:user,username|min_length:3|max_length:18'"}],attrs:{id:"username","error-el":"#username-error",type:"text",placeholder:"用户名"},domProps:{value:t.current.username},on:{input:function(e){e.target.composing||t.$set(t.current,"username",e.target.value)}}}),t._m(2)]),a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.password,expression:"current.password"},{name:"validator",rawName:"v-validator",value:"required|min_length:6|max_length:64",expression:"'required|min_length:6|max_length:64'"}],attrs:{id:"password","error-el":"#password-error",type:"password",placeholder:"密码"},domProps:{value:t.current.password},on:{input:function(e){e.target.composing||t.$set(t.current,"password",e.target.value)}}}),t._m(3)]),a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.re_password,expression:"current.re_password"},{name:"validator",rawName:"v-validator",value:"required|shadow:#password",expression:"'required|shadow:#password'"}],attrs:{id:"re_password",type:"password",placeholder:"请再次输入密码"},domProps:{value:t.current.re_password},on:{input:function(e){e.target.composing||t.$set(t.current,"re_password",e.target.value)}}})]),"phone"==t.signup_by?a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.phone,expression:"current.phone"},{name:"validator",rawName:"v-validator",value:"required|cellphone|not_exist:user,phone",expression:"'required|cellphone|not_exist:user,phone'"}],key:"current.phone",attrs:{id:"phone",type:"text","error-el":"#phone-test",placeholder:"手机号"},domProps:{value:t.current.phone},on:{input:function(e){e.target.composing||t.$set(t.current,"phone",e.target.value)}}}),t._m(4)]):t._e(),"mail"==t.signup_by?a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.mail,expression:"current.mail"},{name:"validator",rawName:"v-validator",value:"required|mail|not_exist:user,e_mail",expression:"'required|mail|not_exist:user,e_mail'"}],key:"current.mail",attrs:{id:"mail",type:"text","error-el":"#email-test",placeholder:"邮箱"},domProps:{value:t.current.mail},on:{input:function(e){e.target.composing||t.$set(t.current,"mail",e.target.value)}}}),t._m(5)]):t._e(),a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.vcode,expression:"current.vcode"},{name:"validator",rawName:"v-validator",value:"required",expression:"'required'"}],attrs:{id:"vcode","error-el":"#vcode",type:"text",placeholder:"验证码"},domProps:{value:t.current.vcode},on:{input:function(e){e.target.composing||t.$set(t.current,"vcode",e.target.value)}}}),a("button",{attrs:{type:"button",disabled:0!=t.captcha.countdown},on:{click:t.send_code}},[t.captcha.countdown?a("span",[t._v(t._s(t.captcha.countdown))]):a("span",[t._v("发送验证码")])])]),a("div",{staticClass:"error-list"},[t.invalid_code?a("div",{staticClass:"error",attrs:{id:"vcode-error"}},[t._v("验证码有误")]):t._e()]),t._m(6),a("div",{staticClass:"input-control small muted"},[t._v("\n                已有账号？\n                "),a("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)])])])])])])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-5",staticStyle:{"margin-left":"0"}},[a("div",{staticClass:"bg-pic"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("h1",[t._v("欢迎注册洋洋车")]),a("div",{staticClass:"sub-title"},[t._v("买好车，上洋洋车")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-list"},[a("div",{attrs:{id:"username-error"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-list"},[a("div",{attrs:{id:"password-error"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-list"},[a("div",{attrs:{id:"phone-test"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-list"},[a("div",{attrs:{id:"email-test"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("立即注册")])])}],nt={data:function(){return{current:{},code:"",signup_by:"phone",invalid_code:!1,captcha:{timer:null,countdown:0}}},methods:{submit:function(){var t=this;this.invalid_code=this.current.vcode!==this.code,this.invalid_code||("mail"==this.signup_by?delete this.current.phone:delete this.current.mail,!this.current.username&&(this.current.username=this.current[this.signup_by]),Q("user/create",this.current).then(function(e){_.login(e.data.data),alert("注册成功！"),t.$router.push("/")}))},send_code:function(){var t,e,a=this;this.captcha.countdown||(this.captcha.countdown=60,t="sms",(e="mail"==this.signup_by)&&(t="mail"),e&&!this.current.mail||!e&&this.current.phone||(this.captcha.timer=setInterval(function(){0!=a.captcha.countdown?a.$set(a.captcha,"countdown",a.captcha.countdown-1):clearInterval(a.captcha.timer)},1e3),Q("captcha/".concat(t),{phone:this.current.phone,e_mail:this.current.mail}).then(function(t){a.code=atob(t.data.data.result)})))}}},rt=nt,st=(a("ri+a"),Object(u["a"])(rt,at,it,!1,null,"4445c1b4",null)),ot=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav"),a("div",{staticClass:"bg-pic"},[a("div",{staticClass:"container parent"},[a("form",{staticClass:"main-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("h1",[t._v("登录")]),t.login_failed?a("div",{staticClass:"error-list"},[a("div",{staticClass:"error"},[t._v("用户名或密码有误")])]):t._e(),a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.current.$unique,expression:"current.$unique"}],attrs:{id:"username",type:"text",placeholder:"用户名/手机号/邮箱",autocomplete:"off"},domProps:{value:t.current.$unique},on:{input:function(e){e.target.composing||t.$set(t.current,"$unique",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.current.password,expression:"current.password"}],attrs:{id:"password",type:"password",placeholder:"密码"},domProps:{value:t.current.password},on:{input:function(e){e.target.composing||t.$set(t.current,"password",e.target.value)}}})]),t._m(0),t._m(1)])])]),a("Footer")],1)},lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("登录")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-control"},[a("p",[t._v("没有账号？"),a("a",{staticClass:"signup",attrs:{href:"#"}},[t._v("注册")])])])}],ut=(a("v3Rm"),{components:{Nav:E,Footer:M},data:function(){return{current:{},login_failed:!1}},methods:{submit:function(){var t,e,a=this;(t=this.current.$unique)&&(e=this.current.password)&&("admin"!==t||"yoyoyo"!==e?Q("user/read",{where:{or:[["username","=",t],["phone","=",t],["e_mail","=",t]]}}).then(function(t){var i;(i=t.data.data[0])&&i.password==e?a.on_login_succeed(i):a.login_failed=!0}):this.on_login_succeed({id:1,username:"admin",is_admin:!0}))},on_login_succeed:function(t){this.login_failed=!1,delete t.password,_.login(t),alert("登录成功"),_.is_admin()&&this.$router.push("/admin/user"),this.$router.push("/")}}}),dt=ut,vt=(a("qqIC"),Object(u["a"])(dt,ct,lt,!1,null,"0b3eaf6f",null)),pt=vt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav"),a("div",{staticClass:"header"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"col-lg-6 left"},[t._v("\n          "+t._s(t.detail.title)+"\n          "),a("span",{staticClass:"tag"},[t._v("超值")]),a("span",{staticClass:"tag"},[t._v("0过户")])]),a("div",{staticClass:"col-lg-6 right"},[a("SearchBar",{attrs:{width:"100%"}})],1)])]),a("div",{staticClass:"row vehicle-intro"},[a("div",{staticClass:"container"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"slider"},[a("img",{attrs:{src:t.detail.preview?t.detail.preview[t.selected_preview].url:"https://i.loli.net/2018/07/06/5b3f160071a17.jpg",alt:"一辆车"}})]),a("div",{staticClass:"thumb-list"},t._l(t.detail.preview,function(e,i){return a("div",{key:i,staticClass:"col-lg-3",on:{mouseover:function(e){t.selected_preview=i}}},[a("img",{attrs:{src:e.url,alt:"pre.name"}})])}))]),a("div",{staticClass:"col-lg-6 order-panel"},[a("div",{staticClass:"title"},[t._v("\n                  "+t._s(t.detail.title)+"\n              ")]),a("div",{staticClass:"well"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3 prop"},[t._v("报价:")]),a("div",{staticClass:"col-lg-9"},[a("span",{staticClass:"price currency"},[t._v(t._s(t.detail.price)+"万")]),a("span",{staticClass:"price currency"},[t._v("含税"+t._s(t.detail.price)+"万")])])]),t._m(0),t._m(1)]),a("div",{staticClass:"short-props"},[a("div",{staticClass:"dib"},[a("div",{staticClass:"value"},[t._v(t._s(t._f("only_day")(t.detail.birth_day)))]),a("div",{staticClass:"prop"},[t._v("上牌时间")])]),a("div",{staticClass:"dib"},[a("div",{staticClass:"value"},[t._v(t._s(t.detail.consumed_distance||0)+"万公里")]),a("div",{staticClass:"prop"},[t._v("公里数")])]),t._m(2),t._m(3),t._m(4)]),t.appointed_appo?a("div",[a("button",{staticClass:"btn btn-primary",attrs:{disabled:""}},[t._v("已预约")]),a("p",[t._v("预约时间："+t._s(t.appointed_appo.appointed_at))])]):a("div",{staticClass:"action"},[t.show_appo?t._e():a("div",[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.show_appo=!0}}},[t._v("预约看车")]),a("span",{staticClass:"tel"},[t._v("400-080-5027")])]),t.show_appo?a("form",{on:{submit:function(e){return e.preventDefault(),t.submit_appo(e)}}},[a("div",{staticClass:"input-control"},[a("label",{attrs:{for:"appointed_at"}},[t._v("预约时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.appo.appointed_at,expression:"appo.appointed_at"},{name:"validator",rawName:"v-validator",value:"required",expression:"'required'"}],attrs:{id:"appointed_at",type:"date"},domProps:{value:t.appo.appointed_at},on:{input:function(e){e.target.composing||t.$set(t.appo,"appointed_at",e.target.value)}}})]),a("div",{staticClass:"input-control btn-group"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("预约")]),a("button",{attrs:{type:"button"},on:{click:function(e){t.show_appo=!1}}},[t._v("取消")])])]):t._e()])])])]),a("div",{staticClass:"row vehicle-detail"},[a("div",{staticClass:"container"},[a("h2",[t._v("车辆详情")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("ReportPanel",{attrs:{title:"排除重大事故检测",cat:"major_accident",reportStructure:t.report_structure,report:t.report}})],1),a("div",{staticClass:"col-lg-6"},[a("ReportPanel",{attrs:{title:"泡水火烧检测",cat:"soaking_and_roasting",reportStructure:t.report_structure,report:t.report}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("ReportPanel",{attrs:{title:"轻微碰撞检测",cat:"minor_crash",reportStructure:t.report_structure,report:t.report}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("ReportPanel",{attrs:{title:"易损耗部件检测",cat:"consumable",reportStructure:t.report_structure,report:t.report}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-2"},[a("ReportPanel",{attrs:{title:"安全系统检测",cat:"security_system",reportStructure:t.report_structure,report:t.report}})],1),a("div",{staticClass:"col-lg-2"},[a("ReportPanel",{attrs:{title:"外部配置检测",cat:"surface_peripheral",reportStructure:t.report_structure,report:t.report}})],1),a("div",{staticClass:"col-lg-2"},[a("ReportPanel",{attrs:{title:"内部配置检测",cat:"inner_peripheral",reportStructure:t.report_structure,report:t.report}})],1),a("div",{staticClass:"col-lg-2"},[a("ReportPanel",{attrs:{title:"灯光系统检测",cat:"lighting_system",reportStructure:t.report_structure,report:t.report}})],1),a("div",{staticClass:"col-lg-2"},[a("ReportPanel",{attrs:{title:"高科技配置检测",cat:"high_tech",reportStructure:t.report_structure,report:t.report}})],1),a("div",{staticClass:"col-lg-2"},[a("ReportPanel",{attrs:{title:"随车工具检测",cat:"tool",reportStructure:t.report_structure,report:t.report}})],1)]),t._m(5)])]),a("Footer")],1)},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3 prop"},[t._v("服务费:")]),a("div",{staticClass:"col-lg-9"},[a("span",{staticClass:"price currency"},[t._v("3000")]),a("span",{staticClass:"help"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3 prop"},[t._v("服务项:")]),a("div",{staticClass:"col-lg-9"},[a("span",{staticClass:"server"},[t._v("整车质保")]),a("span",{staticClass:"server"},[t._v("14天可退")]),a("span",{staticClass:"server"},[t._v("249项车况检测")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dib"},[a("div",{staticClass:"value"},[t._v("国五")]),a("div",{staticClass:"prop"},[t._v("外迁查询")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dib"},[a("div",{staticClass:"value"},[t._v("1.5L")]),a("div",{staticClass:"prop"},[t._v("排量")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dib"},[a("div",{staticClass:"value"},[t._v("陕A")]),a("div",{staticClass:"prop"},[t._v("上牌城市")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 dashed"},[a("div",{staticClass:"sub-title"},[t._v("卖家-马先生说车")]),a("div",{staticClass:"detail"},[t._v("这辆车是我平时上下班代步用的车，2016年12月上的牌，到现在2.04万多公里正是车的好时候！这台车是我平时的代步车，平时出门或者过年回老家都会用它，使用强度不算很大。外观好看，特别是日间行车灯，油耗目前位置比较满意，开别克就有一种很稳的感觉，一点都不飘，好像是20万左右的车子一样。这台车一直是自己家用，没给外人用过，车况没毛病。我这车没买多长时间，算是准新车，光购置税就能省不少钱。我的车外观漆面良好，内饰也经常收拾，车况没毛病。")])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"sub-title"},[t._v("车辆手续信息")]),a("div",{staticClass:"col-lg-6 detail"},[a("table",[a("tbody",[a("tr",[a("td",[t._v("年检到期时间")]),a("td",[t._v("2018-12")])]),a("tr",[a("td",[t._v("商业险到期时间")]),a("td",[t._v("2018-12")])]),a("tr",[a("td",[t._v("有无购车发票")]),a("td",[t._v("否")])]),a("tr",[a("td",[t._v("是否4S店保养")]),a("td",[t._v("否")])])])])]),a("div",{staticClass:"col-lg-6"},[a("table",[a("tbody",[a("tr",[a("td",[t._v("交强险到期时间")]),a("td",[t._v("2018-12")])]),a("tr",[a("td",[t._v("过户次数")]),a("td",[t._v("0次")])]),a("tr",[a("td",[t._v("车辆购置税完税证明")]),a("td",[t._v("无")])]),a("tr",[a("td",[t._v("有无改装")]),a("td",[t._v("无")])])])])])])])}],ht=(a("dRSK"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report-panel"},[a("div",{staticClass:"title"},[t._v(t._s(t.title||"检查报告"))]),t.empty_report()?a("div",t._l(t.report,function(e,i){return(t.conf=t.reportStructure[i])&&t.conf.cat==t.cat?a("div",{key:i,class:"col-lg-4 report-item "+(e?"-":"muted")},[a("span",e?{staticClass:"fontawesome-ok"}:{staticClass:"fontawesome-minus"}),t._v(t._s(t.conf.display_name)+"\n    ")]):t._e()})):a("div",{staticClass:"empty-holder"},[t._v("暂未检测")])])}),ft=[],gt=(a("rGqo"),a("yt8O"),a("RW0V"),{props:["title","reportStructure","report","cat"],methods:{empty_report:function(){return!!this.report&&Object.keys(this.report).length}}}),bt=gt,yt=(a("zro5"),Object(u["a"])(bt,ht,ft,!1,null,"58052142",null)),Ct=yt.exports,wt={components:{Nav:E,SearchBar:$,ReportPanel:Ct,Footer:M},data:function(){return{detail:{},selected_preview:0,report:{},report_structure:{},appo:{},appointed_appo:{},show_appo:!1}},mounted:function(){var t=this.get_id();this.find(t),this.find_report_by_vehicle(t),this.get_report_structure(),this.prepare_appo_row(),this.has_appointed()},methods:{submit_appo:function(){var t=this,e=this.appo;Q("appo/create",e).then(function(e){t.has_appointed()})},find:function(t){var e=this;Q("vehicle/find",{id:t}).then(function(t){e.detail=t.data.data})},get_id:function(){return this.$route.params.id},find_report_by_vehicle:function(t){var e=this;Q("report/first",{where:{vehicle_id:t}}).then(function(t){e.report=t.data.data})},get_report_structure:function(){var t=this;Q("MODEL/FIND",{key:"report"}).then(function(e){t.report_structure=e.data.data.structure})},prepare_appo_row:function(){this.appo.vehicle_id=this.get_id(),this.appo.user_id=_.uinfo().id},has_appointed:function(){var t=this,e=this.appo,a="";e.user_id||(a='and "user_id" = '.concat(e.user_id));var i='where("vehicle_id" = '.concat(e.vehicle_id," ").concat(a,")");Q("appo/read",i).then(function(e){t.appointed_appo=e.data.data[0]})}}},kt=wt,xt=(a("aQVd"),Object(u["a"])(kt,_t,mt,!1,null,"155ba219",null)),$t=xt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container"},[a("SearchBar",{attrs:{keyword:t.search_param.keyword,width:"80%"}})],1),a("div",{staticClass:"container"},[a("div",{staticClass:"filter-list"},[a("div",{staticClass:"kill-space filter"},[a("div",{staticClass:"col-lg-1 prop"},[t._v("品牌")]),a("div",{staticClass:"col-lg-10 range"},[a("span",{class:{active:!t.search_param.brand_id},on:{click:function(e){t.remove_query("brand_id")}}},[t._v("不限")]),t._l(t.list.brand,function(e){return a("span",{key:e.id,class:{active:t.search_param.brand_id==e.id},on:{click:function(a){t.set_query_where("brand_id",e.id)}}},[t._v(t._s(e.name)+"\n                    ")])})],2),a("div",{staticClass:"col-lg-1 right others"})]),a("div",{staticClass:"kill-space filter"},[a("div",{staticClass:"col-lg-1 prop"},[t._v("车类")]),a("div",{staticClass:"col-lg-10 range"},[a("span",{class:{active:!t.search_param.design_id},on:{click:function(e){t.remove_query("design_id")}}},[t._v("不限")]),t._l(t.list.design,function(e){return a("span",{key:e.id,class:{active:t.search_param.design_id==e.id},on:{click:function(a){t.set_query_where("design_id",e.id)}}},[t._v(t._s(e.name)+"\n                    ")])})],2),a("div",{staticClass:"col-lg-1 right others"})]),a("div",{staticClass:"kill-space filter"},[a("div",{staticClass:"col-lg-1 prop"},[t._v("价格")]),a("div",{staticClass:"col-lg-10 range"},[a("span",{class:{active:!t.search_param.price_min&&!t.search_param.price_max},on:{click:function(e){t.set_query_price_range()}}},[t._v("不限")]),a("span",{class:{active:0==t.search_param.price_min&&3==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(0,3)}}},[t._v("3万以下")]),a("span",{class:{active:3==t.search_param.price_min&&5==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(3,5)}}},[t._v("3-5万")]),a("span",{class:{active:5==t.search_param.price_min&&8==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(5,8)}}},[t._v("5-8万")]),a("span",{class:{active:8==t.search_param.price_min&&10==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(8,10)}}},[t._v("8-10万")]),a("span",{class:{active:10==t.search_param.price_min&&15==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(10,15)}}},[t._v("10-15万")]),a("span",{class:{active:15==t.search_param.price_min&&20==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(15,20)}}},[t._v("15-20万")]),a("span",{class:{active:20==t.search_param.price_min&&30==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(20,30)}}},[t._v("20-30万")]),a("span",{class:{active:30==t.search_param.price_min&&0==t.search_param.price_max},on:{click:function(e){t.set_query_price_range(30,0)}}},[t._v("30万以上")])]),a("div",{staticClass:"col-lg-1 right others"})])]),a("div",{staticClass:"filter-list"},[a("div",{staticClass:"filter"},[a("div",{staticClass:"range"},[a("span",[t._v("默认排序")]),a("span",{staticClass:"anchor",on:{click:function(e){t.toggle_sort_by("id")}}},[t._v("时间\n                  "),a("i",{class:{"fontawesome-chevron-up":t.is_sort("id","up"),"fontawesome-chevron-down":t.is_sort("id","down")}})]),a("span",{staticClass:"anchor",on:{click:function(e){t.toggle_sort_by("price")}}},[t._v("价格\n                  "),a("i",{class:{"fontawesome-chevron-up":t.is_sort("price","up"),"fontawesome-chevron-down":t.is_sort("price","down")}})]),a("span",{staticClass:"anchor",on:{click:function(e){t.toggle_sort_by("birth_day")}}},[t._v("车龄\n                  "),a("i",{class:{"fontawesome-chevron-up":t.is_sort("birth_day","up"),"fontawesome-chevron-down":t.is_sort("birth_day","down")}})]),a("span",{staticClass:"anchor",on:{click:function(e){t.toggle_sort_by("consumed_distance")}}},[t._v("里程\n                  "),a("i",{class:{"fontawesome-chevron-up":t.is_sort("consumed_distance","up"),"fontawesome-chevron-down":t.is_sort("consumed_distance","down")}})])])])])]),a("div",{staticClass:"container"},[t.result.length?a("div",{staticClass:"row vehicle-list"},t._l(t.result,function(e){return a("div",{key:e.id,staticClass:"col-lg-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"thumbnail"},[a("img",{attrs:{src:t.get_main_cover_url(e)}})]),a("div",{staticClass:"detail"},[a("div",{staticClass:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"desc"},[t._v("2015年02月 / 3.07万公里")]),a("div",{staticClass:"others"},[a("span",{staticClass:"price"},[t._v(t._s(e.price)+"万")]),a("span",[t._v("首付3.5万")]),a("router-link",{staticClass:"btn btn-primary buy",attrs:{to:"/detail/"+e.id}},[t._v("购买")])],1)])])])})):a("div",{staticClass:"empty-holder"},[t._v("暂无内容")]),a("pagination",{attrs:{totalCount:t.total,limit:t.limit,onPageChange:t.on_page_change,currentPage:t.search_param.page}})],1)],1)},Pt=[],qt=(a("pIFo"),a("a1Th"),a("OG14"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown",on:{mouseleave:function(e){t.show_menu=!1}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search",attrs:{placeholder:t.placeholder,type:"search"},domProps:{value:t.keyword},on:{keyup:function(e){t.show_menu=!0},focus:function(e){t.show_menu=!0},click:function(e){t.show_menu=!0},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t.show_menu&&t.result.length?a("div",{staticClass:"menu"},t._l(t.result,function(e){return a("div",{key:e[t.displayKey],staticClass:"menu-item",on:{click:function(a){t.select(e)}}},[t._v(t._s(e[t.displayKey])+"\n        ")])})):t._e()])}),Et=[],St={props:{api:{},list:{default:function(){return[]}},default:{},onSelect:{},primaryKey:{default:"id"},displayKey:{default:"name"},placeholder:{default:"请选择"}},data:function(){return{api_conf:{},result:[],keyword:"",selected:{},show_menu:!1,timer:null}},mounted:function(){this.set_default(),this.api_conf=this.parse_api();var t=this.list;t&&(this.result=Object.assign([],this.list))},methods:{set_default:function(){var t=this,e=this.default;if(e){var a=this.list.find(function(a){return a[t.primaryKey]==e});this.select(a)}else this.reset()},select:function(t){this.selected=t,this.show_menu=!1,this.keyword=t[this.displayKey],this.onSelect&&this.onSelect(t)},search:function(){var t=this,e={},a=this.api_conf.property;a&&(this.api_conf.property.forEach(function(a){e[a]=t.keyword}),clearTimeout(this.timer),this.timer=setTimeout(function(){Q("".concat(t.api_conf.model,"/search"),{or:e}).then(function(e){t.result=e.data.data})},300))},filter:function(){var t=this;this.result=Object.assign([],this.list),this.result=this.result.filter(function(e){return-1!=e[t.displayKey].indexOf(t.keyword)})},reset:function(){this.keyword="",this.selected={}},parse_api:function(){var t=this.api;if("string"!=typeof t)return Object.assign({},t);t=t.split(".");var e=t[0],a=t[1];return a=a.split(","),{model:e,property:a}}},watch:{default:function(){this.set_default()},keyword:function(){this.api?this.search():this.filter()},list:{deep:!0,handler:function(t){this.result=t}}}},Ot=St,Dt=(a("y6fR"),Object(u["a"])(Ot,qt,Et,!1,null,"36470310",null)),jt=Dt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.last_page?a("div",{staticClass:"pagination"},[a("span",{staticClass:"btn-group"},[a("button",{class:{disabled:t.is_first_page,btn:!0},attrs:{disabled:t.is_first_page},on:{click:function(e){t.change(1)}}},[t._v("首页")]),a("button",{class:{disabled:t.is_first_page,btn:!0},attrs:{disabled:t.is_first_page},on:{click:t.prev}},[t._v("上一页")])]),t._v("\n     \n    "),a("span",{staticClass:"btn-group"},t._l(t.last_page,function(e){return Math.abs(e-t.current_page)<=t.half_limit?a("button",{key:e,staticClass:"btn",class:{active:e==t.current_page},on:{click:function(a){t.change(e)}}},[t._v(t._s(e)+"\n        ")]):t._e()})),t._v("\n     \n    "),a("span",{staticClass:"btn-group"},[a("button",{class:{disabled:t.is_last_page,btn:!0},attrs:{disabled:t.is_last_page},on:{click:t.next}},[t._v("下一页\n        ")]),a("button",{class:{disabled:t.is_last_page,btn:!0},attrs:{disabled:t.is_last_page},on:{click:function(e){t.change(t.last_page)}}},[t._v("尾页\n        ")])])]):t._e()},Mt=[],Ft={props:{limit:{default:0},totalCount:{default:0},currentPage:{default:1},onPageChange:{}},data:function(){return{current_page:1}},mounted:function(){this.current_page=this.currentPage},methods:{change:function(t){this.onPageChange&&this.onPageChange(t),this.current_page=t},prev:function(){this.is_first_page||this.change(--this.current_page)},next:function(){this.is_last_page||this.change(++this.current_page)}},computed:{last_page:function(){return Math.ceil(this.totalCount/this.limit)},half_limit:function(){return Math.floor(this.limit/2)},is_first_page:function(){return 1==this.current_page},is_last_page:function(){return this.current_page==this.last_page}},watch:{currentPage:function(t){this.current_page=t}}},It=Ft,Kt=(a("iu94"),Object(u["a"])(It,At,Mt,!1,null,null,null)),Lt=Kt.exports;function zt(t){return JSON.parse(JSON.stringify(t))}var Rt={components:{Nav:E,SearchBar:$,Dropdown:jt,Pagination:Lt},mixins:[L,Z],mounted:function(){this.search(),this.read("brand"),this.read("design")},data:function(){return{result:[],total:0,limit:4,list:{},search_param:{}}},methods:{on_page_change:function(t){this.set_condition("page",t)},parse_route_query:function(){var t=zt(this.$route.query);return t.sort_by||(t.sort_by=["id","down"]),"string"==typeof t.sort_by&&(t.sort_by=t.sort_by.split(",")),t},prepare_search_param:function(){var t=this.parse_route_query();this.search_param=t},is_sort:function(t,e){var a=this.search_param;return!!a.sort_by&&(a.sort_by[0]==t&&a.sort_by[1]==e)},toggle_sort_by:function(t){var e=this.parse_route_query(),a=e.sort_by[0],i=e.sort_by[1];a==t?e.sort_by[1]="up"==i?"down":"up":(e.sort_by[0]=t,e.sort_by[1]="down"),e.sort_by=e.sort_by.toString(),this.$router.replace({query:e})},set_query_price_range:function(t,e){var a=Object.assign({},this.$route.query);if(t||e){var i={price_min:t,price_max:e};a=Object.assign({},a,i)}else delete a.price_min,delete a.price_max;this.$router.replace({query:a})},set_condition:function(t,e){var a=zt(this.$route.query);switch(t){case"sort_by":a.sort_by=e;break;case"page":a.page=e;break}this.$router.replace({query:a}),this.search()},remove_query:function(t){var e=this.parse_route_query();delete e[t],this.$router.replace({query:e})},set_query_where:function(t,e){var a={};a[t]=e;var i=this.search_param,n=Object.assign({},i,a);this.$router.replace({query:n})},on_submit:function(){this.search()},search:function(){var t=this,e=this.search_param,a="",i="",n="",r="";e.brand_id&&(a='and "brand_id" = '.concat(e.brand_id)),e.design_id&&(i='and "design_id" = '.concat(e.design_id)),e.price_min&&(n='and "price" >= '.concat(e.price_min)),e.price_max&&(r='and "price" <= '.concat(e.price_max));var s='where("title" contains "'.concat(e.keyword||"",'" ').concat(a," ").concat(i," ").concat(n," ").concat(r,")");Q("vehicle/read",{query:s,sort_by:e.sort_by,limit:this.limit,page:e.page}).then(function(e){t.result=e.data.data,t.total=e.data.total})}},watch:{"$route.query":{deep:!0,handler:function(t){this.prepare_search_param(),this.search()}}}},Tt=Rt,Bt=(a("re+p"),Object(u["a"])(Tt,Nt,Pt,!1,null,null,null)),Jt=Bt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav"),a("div",{staticClass:"header"},[a("div",{staticClass:"container por"},[a("form",{staticClass:"main-form",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[1==t.step?a("div",[a("h1",[t._v("要卖什么车？")]),a("div",{staticClass:"input-control"},[a("div",{staticClass:"col-lg-6"},[a("label",[t._v("品牌")]),a("Dropdown",{attrs:{list:t.brand_list,onSelect:t.set_brand_id}})],1),a("div",{staticClass:"col-lg-6"},[a("label",[t._v("型号")]),a("Dropdown",{attrs:{list:t.model_list,onSelect:t.set_model_id}})],1)])]):t._e(),2==t.step?a("div",[a("h1",[t._v("怎么联系你？")]),a("div",{staticClass:"input-control"},[a("label",[t._v("请输入您的手机号")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required|cellphone",expression:"'required|cellphone'"},{name:"model",rawName:"v-model",value:t.current.phone,expression:"current.phone"}],key:"phone",attrs:{"error-el":"#phone-error",type:"text"},domProps:{value:t.current.phone},on:{input:function(e){e.target.composing||t.$set(t.current,"phone",e.target.value)}}}),t._m(0)])]):t._e(),3==t.step?a("div",[a("h1",[t._v("发布成功")]),a("p",[t._v("审核中···")]),a("p",[a("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[t.step>1&&t.step<3?a("button",{attrs:{type:"button"},on:{click:function(e){t.dec()}}},[t._v("上一步")]):t._e()]),a("div",{staticClass:"col-lg-6"},[t.step<2?a("button",{attrs:{type:"button"},on:{click:function(e){t.inc()}}},[t._v("下一步")]):t._e(),2==t.step?a("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:!t.current.brand_id||!t.current.model_id||!t.current.phone}},[t._v("发布二手车\n            ")]):t._e()])])])])]),a("Footer")],1)},Ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-list"},[a("div",{attrs:{id:"phone-error"}})])}];a("f3/d");function Vt(t,e){var a=te(5,10),i=te(2014,2018),n=["风尚型","奢华型","经济型","商用型","运动型"],r=n[te(0,n.length-1)];return"".concat(t||""," ").concat(e," ").concat(a,"成新 ").concat(i," ").concat(r)}function Gt(){return ee(1,500,1)}function Wt(){var t=["新年换新车","急需资金周转","急需跑路费","车太多放不下","分手费变现"];return t[te(0,t.length-1)]}function Xt(){return te(1,50)}function Zt(){return Math.random()>=.5}function Yt(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),i=t.getDate();return Ut(e,e,a,a+te(0,1),i,i+te(1,20))}function Ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2015,e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:28;e=e||(new Date).getFullYear();var s=te(t,e),o=te(a,i),c=te(n,r);return"".concat(s,"-").concat(o,"-").concat(c)}function te(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Math.round(ee(t,e))}function ee(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(Math.random()*(e-t)+t).toFixed(a)}var ae={title:Vt,rand_int:te,price:Gt,reason:Wt,consumed:Xt,rand_date:Ut,rand_bool:Zt,rand_deadline:Yt},ie={components:{Nav:E,Footer:M,Dropdown:jt},data:function(){return{current:{},step:1,brand_list:[],model_list:[],design_list:[]}},mounted:function(){this.list_brand(),this.list_model(),this.list_design()},methods:{inc:function(){this.step>=3||this.step++},dec:function(){this.step<=1||this.step--},submit:function(){var t=this,e={},a=this.current,i=this.brand_list.find(function(e){return e.id==t.current.brand_id}).name,n=this.model_list.find(function(e){return e.id==t.current.model_id}).name;e.title=ae.title(i,n),e.price=ae.price(),e.publish_reason=ae.reason(),e.exchange_times=ae.rand_int(1,5),e.birth_day=ae.rand_date(),e.deadline=ae.rand_deadline(),e.condition=ae.rand_int(1,9),e.design_id=this.design_list[ae.rand_int(0,this.design_list.length-1)].id,a.publisher_id=_.his_id(),a=Object.assign({},a,e),Q("vehicle/create",a).then(function(e){t.step=3})},list_brand:function(){var t=this;Q("brand/read").then(function(e){t.brand_list=e.data.data})},list_model:function(){var t=this;Q("model/read").then(function(e){t.model_list=e.data.data})},list_design:function(){var t=this;Q("design/read").then(function(e){t.design_list=e.data.data})},set_brand_id:function(t){this.$set(this.current,"brand_id",t.id)},set_model_id:function(t){this.$set(this.current,"model_id",t.id)}}},ne=ie,re=Object(u["a"])(ne,Qt,Ht,!1,null,null,null),se=re.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},ce=[],le=(a("gU+5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-nav"},[a("div",{staticClass:"title"},[t._v("管理员设置")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/user"}},[t._v("用户管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/vehicle"}},[t._v("车辆管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/brand"}},[t._v("品牌管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/model"}},[t._v("型号管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/design"}},[t._v("车类管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/location"}},[t._v("地址管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/report"}},[t._v("质检管理")]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/appo"}},[t._v("预约管理")])],1)}),ue=[],de=(a("hsSA"),{}),ve=de,pe=(a("rBkT"),Object(u["a"])(ve,le,ue,!1,null,"2d86d2fe",null)),_e=pe.exports,me={components:{Nav:E,AdminNav:_e}},he=me,fe=(a("2NrP"),Object(u["a"])(he,oe,ce,!1,null,"b0e8f668",null)),ge=fe.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou(e)}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("用户名")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:t.rule,expression:"rule"},{name:"model",rawName:"v-model",value:t.current.username,expression:"current.username"}],attrs:{type:"text"},domProps:{value:t.current.username},on:{input:function(e){e.target.composing||t.$set(t.current,"username",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("真实姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.real_name,expression:"current.real_name"}],attrs:{type:"text"},domProps:{value:t.current.real_name},on:{input:function(e){e.target.composing||t.$set(t.current,"real_name",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("手机号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.phone,expression:"current.phone"}],attrs:{type:"text"},domProps:{value:t.current.phone},on:{input:function(e){e.target.composing||t.$set(t.current,"phone",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("邮箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.e_mail,expression:"current.e_mail"}],attrs:{type:"e-mail"},domProps:{value:t.current.e_mail},on:{input:function(e){e.target.composing||t.$set(t.current,"e_mail",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("密码")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required|min_length:6|max_length:16",expression:"'required|min_length:6|max_length:16'"},{name:"model",rawName:"v-model",value:t.current.password,expression:"current.password"}],attrs:{type:"text"},domProps:{value:t.current.password},on:{input:function(e){e.target.composing||t.$set(t.current,"password",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.username))]),a("td",[t._v(t._s(e.real_name))]),a("td",[t._v(t._s(e.phone||"-"))]),a("td",[t._v(t._s(e.e_mail||"-"))]),a("td",[t._v(t._s(e.password))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("用户管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("用户名")]),a("th",[t._v("真实姓名")]),a("th",[t._v("手机号")]),a("th",[t._v("邮箱")]),a("th",[t._v("密码")]),a("th",[t._v("操作")])])}],Ce=a("iv4g"),we=a("oyJW");function ke(t){var e={};return t.split("|").forEach(function(t){var a=t.split(":"),i=a[0],n=a[1];n&&(n=n.split(",")),n=void 0===n||n,e[i]=n}),e}var xe={mail:function(t,e){var a={zh:"邮箱格式有误",en:"Invalid email"},i=/[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z]/;if(!i.test(t))throw a[e];return!0},shadow:function(t,e,a){var i={zh:"两次输入不一致",en:"Inconsistent double inputs"},n=document.querySelector(a),r=n.value;if(t!=r)throw i[e];return!0},numeric:function(t,e){var a={zh:"只能输入数字",en:"Only number"},i=parseFloat(t)==t;if(!i)throw a[e];return i},positive:function(t,e){var a={zh:"不合法的数字",en:"Invalid number"},i=this.numeric(t)&&parseFloat(t)>0;if(!i)throw a[e];return i},max:function(t,e,a){var i={zh:"最大值为："+a,en:"Max value: "+a},n=this.numeric(t)&&parseFloat(t)<=a;if(!n)throw i[e];return n},min:function(t,e,a){var i={zh:"小值为："+a,en:"Min value: "+a},n=this.numeric(t)&&parseFloat(t)>=a;if(!n)throw i[e];return n},username:function(t,e){var a={zh:"用户名不合法，只能包含字母和数字",en:"Invalid username"},i=/^[a-zA-Z0-9]*$/,n=i.test(t);if(!n)throw a[e];return n},not_exist:function(t,e,a,i,n){return new Promise(function(e,r){return t&&t!=n||e(),Q("".concat(a,"/first"),{where:{and:Object(we["a"])({},i,t)}}).then(function(t){return t.data.data?r("用户名已存在"):e(!0)})})},required:function(t,e){var a={zh:"此项为必填项",en:"This field is required"};if("number"===typeof t)return!0;var i=!!t;if(!i)throw a[e];return i},min_length:function(t,e,a){var i={zh:"此项的最小长度为"+a,en:"Minimal length: "+a},n=t.length>=parseInt(a);if(!n)throw i[e];return n},max_length:function(t,e,a){var i={zh:"此项的最大长度为"+a,en:"Maximum length: "+a},n=t.length<=parseInt(a);if(!n)throw i[e];return n},cellphone:function(t,e){var a={zh:"不和法的手机号",en:"Invalid phone number"};if(!this.numeric(t,e)||!this.length(t,e,11))throw a[e];return!0},length:function(t,e,a){var i={zh:"不合法的长度，长度需等于"+a+"位",en:"Invalid field length, length should equlas to "+a};if(t=t.toString(),t.length==a)return!0;throw i[e]}};function $e(t,e){var a=!1;t.forEach(function(t){"true"===t.getAttribute("invalid")&&(a=!0)}),a?Ne(e):Pe(e)}function Ne(t){t.setAttribute("disabled","disabled")}function Pe(t){t.removeAttribute("disabled")}function qe(t,e){var a=t.querySelector("[type=submit]");if(!a)throw"Missing submit button";t.$state={lang:e,el_submit:a,input_list:[]}}function Ee(t,e){t.$state.input_list.push(e)}function Se(t,e,a,i){var n=e.value,r=!1,s=t.$state.lang,o="";if(p(!1),n||i.required){if(i.required)try{xe.required(n,s)}catch(t){return void p(!0,t)}for(var c in i){var l=i[c],u=xe[c].bind(xe);try{var d=[n,t.$state.lang].concat(l);if(!r){var v=u.apply(void 0,Object(Ce["a"])(d));v instanceof Promise&&v.then(function(t){t&&p(!1)}).catch(function(t){p(!0,t)})}}catch(t){p(!0,t);break}}}function p(i,n){i?(o+='<div class="error">'.concat(n,"</div>"),e.setAttribute("invalid","true")):e.setAttribute("invalid","false"),"true"===e.getAttribute("dirty")&&(a.innerHTML=o),$e(t.$state.input_list,t.$state.el_submit)}}var Oe,De,je=r["a"].directive("validator",{inserted:function(t,e){var a,i=e.value,n=t.getAttribute("error-el"),r=document.querySelector(n);r||(r=document.createElement("div"),r.classList.add("error-list"),t.insertAdjacentElement("afterEnd",r)),"string"===typeof i&&(i=ke(e.value));var s=t.closest("form");if(!s.$state){var o=t.getAttribute("error-lang")||"zh";qe(s,o)}function c(){clearTimeout(a),a=setTimeout(function(){Se(s,t,r,i)},300)}Ee(s,t),Se(s,t,r,i),t.addEventListener("keyup",c),t.addEventListener("change",c),t.addEventListener("keyup",function(){t.setAttribute("dirty","true")})}}),Ae={directives:{validator:je},components:{Nav:E,AdminNav:_e,Pagination:Lt,Dropdown:jt},data:function(){return{model:"",keyword:"",searchable:[],edit_pattern:!1,current:{},list:[],total:0,last_page:0,current_page:1,limit:5}},methods:{on_page_change:function(t){this.read(t)},cou:function(){var t=this,e=this.current.id?"update":"create";Q("".concat(this.model,"/").concat(e),this.current).then(function(e){e.data.success&&(t.read(),t.current={},t.edit_pattern=!1)})},remove:function(t){var e=this;confirm("确认删除？")&&Q("".concat(this.model,"/delete"),{id:t}).then(function(t){e.read()})},read:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e==this.current_page&&1!=e||Q("".concat(this.model,"/read"),{page:e,limit:this.limit,with:this.with}).then(function(e){t.list=e.data.data,t.current_page=e.data.current_page,t.last_page=e.data.last_page,t.total=e.data.total})},search:function(){var t=this,e={or:{}};this.searchable.forEach(function(a){e.or[a]=t.keyword}),Q("".concat(this.model,"/search"),e).then(function(e){t.list=e.data.data,t.keyword=""})},cancle:function(){this.edit_pattern=!1,this.current={}},set_current:function(t){this.current=t,this.edit_pattern=!0,this.after_set_current&&this.after_set_current()},is_update:function(){return!!this.current.id}},mounted:function(){if(!this.model)throw new Error("请在data中配置当前model");this.read()}},Me=Ae,Fe=Object(u["a"])(Me,Oe,De,!1,null,null,null),Ie=Fe.exports,Ke={data:function(){return{model:"user",searchable:["username","real_name"]}},computed:{rule:function(){var t={required:!0,username:!0,min_length:3,max_length:18,not_exist:["user","username"]};return this.is_update&&t.not_exist.push(this.current.username),t}},mixins:[Ie]},Le=Ke,ze=(a("a70I"),Object(u["a"])(Le,be,ye,!1,null,"848b03b0",null)),Re=ze.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou(e)}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("标题")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required|max_length:40",expression:"'required|max_length:40'"},{name:"model",rawName:"v-model",value:t.current.title,expression:"current.title"}],attrs:{"error-el":"#title-error",type:"text"},domProps:{value:t.current.title},on:{input:function(e){e.target.composing||t.$set(t.current,"title",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("价格")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"positive|numeric",expression:"'positive|numeric'"},{name:"model",rawName:"v-model",value:t.current.price,expression:"current.price"}],attrs:{"error-el":"#price-error",type:"text"},domProps:{value:t.current.price},on:{input:function(e){e.target.composing||t.$set(t.current,"price",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("卖车原因")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"max_length:140",expression:"'max_length:140'"},{name:"model",rawName:"v-model",value:t.current.publish_reason,expression:"current.publish_reason"}],attrs:{"error-el":"#publish_reason-error",type:"text"},domProps:{value:t.current.publish_reason},on:{input:function(e){e.target.composing||t.$set(t.current,"publish_reason",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("当前里程")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"positive|numeric",expression:"'positive|numeric'"},{name:"model",rawName:"v-model",value:t.current.consumed_distance,expression:"current.consumed_distance"}],attrs:{"error-el":"#consumed_distance-error",type:"number"},domProps:{value:t.current.consumed_distance},on:{input:function(e){e.target.composing||t.$set(t.current,"consumed_distance",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("过户次数")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"positive|numeric",expression:"'positive|numeric'"},{name:"model",rawName:"v-model",value:t.current.exchange_times,expression:"current.exchange_times"}],attrs:{"error-el":"#exchange_times",type:"number"},domProps:{value:t.current.exchange_times},on:{input:function(e){e.target.composing||t.$set(t.current,"exchange_times",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("第一次上牌时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.birth_day,expression:"current.birth_day"}],attrs:{type:"date"},domProps:{value:t.current.birth_day},on:{input:function(e){e.target.composing||t.$set(t.current,"birth_day",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("预期出售时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.deadline,expression:"current.deadline"}],attrs:{type:"date"},domProps:{value:t.current.deadline},on:{input:function(e){e.target.composing||t.$set(t.current,"deadline",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("车况")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"positive|max:9",expression:"'positive|max:9'"},{name:"model",rawName:"v-model",value:t.current.condition,expression:"current.condition"}],attrs:{"error-el":"#condeition-error",type:"number"},domProps:{value:t.current.condition},on:{input:function(e){e.target.composing||t.$set(t.current,"condition",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("封面地址")]),a("div",{staticStyle:{"margin-bottom":"5px"}},t._l(t.current.preview,function(e,i){return a("div",{key:i,staticClass:"input-group-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"p.name"}],attrs:{type:"text",placeholder:"部位，如：车头、车尾等"},domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"p.url"}],attrs:{type:"url",placeholder:"图片地址"},domProps:{value:e.url},on:{input:function(a){a.target.composing||t.$set(e,"url",a.target.value)}}}),a("button",{attrs:{type:"button"},on:{click:function(e){t.current.preview.splice(i,1)}}},[t._v("-")])])})),a("button",{attrs:{type:"button"},on:{click:function(e){t.current.preview.push({})}}},[t._v("+   ")])]),a("div",{staticClass:"input-control"},[a("label",[t._v("描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.description,expression:"current.description"}],domProps:{value:t.current.description},on:{input:function(e){e.target.composing||t.$set(t.current,"description",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("发布人")]),a("Dropdown",{attrs:{api:{model:"user",property:["username","real_name"]},default:t.current.user_id,list:t.user_list,displayKey:"username",onSelect:t.set_publisher_id}})],1),a("div",{staticClass:"input-control"},[a("label",[t._v("品牌")]),a("Dropdown",{attrs:{default:t.current.brand_id,list:t.brand_list,onSelect:t.set_brand_id}})],1),a("div",{staticClass:"input-control"},[a("label",[t._v("型号")]),a("Dropdown",{attrs:{default:t.current.model_id,list:t.model_list,onSelect:t.set_model_id}})],1),a("div",{staticClass:"input-control"},[a("label",[t._v("车辆类型")]),a("Dropdown",{attrs:{default:t.current.design_id,list:t.design_list,onSelect:t.set_design_id}})],1),a("div",{staticClass:"input-control"},[a("label",[t._v("所属位置")]),a("Location",{attrs:{onSelect:t.set_location_id}})],1),a("div",{staticClass:"input-control check"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.on_sale,expression:"current.on_sale"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.current.on_sale)?t._i(t.current.on_sale,null)>-1:t.current.on_sale},on:{change:function(e){var a=t.current.on_sale,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=null,s=t._i(a,r);i.checked?s<0&&t.$set(t.current,"on_sale",a.concat([r])):s>-1&&t.$set(t.current,"on_sale",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.current,"on_sale",n)}}}),a("label",{staticClass:"dib",attrs:{for:"sale"}},[t._v("促销")])]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.local,expression:"current.local"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.current.local)?t._i(t.current.local,null)>-1:t.current.local},on:{change:function(e){var a=t.current.local,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=null,s=t._i(a,r);i.checked?s<0&&t.$set(t.current,"local",a.concat([r])):s>-1&&t.$set(t.current,"local",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.current,"local",n)}}}),a("label",{staticClass:"dib",attrs:{for:"local"}},[t._v("本地车牌")])])]),a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.price))]),a("td",[t._v(t._s(e.consumed_distance||"-"))]),a("td",[t._v(t._s(e.deadline||"-"))]),a("td",[t._v(t._s(e.condition?e.condition+"成新":"-"))]),a("td",[t._v(t._s(e.exchange_times||"-"))]),a("td",[t._v(t._s(e.on_sale||"-"))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,onPageChange:this.on_page_change}})],1)])],1)},Be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("车辆管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("标题")]),a("th",[t._v("价格（万元）")]),a("th",[t._v("里程")]),a("th",[t._v("预期出售时间")]),a("th",[t._v("车况")]),a("th",[t._v("过户次数")]),a("th",[t._v("特价")]),a("th",[t._v("操作")])])}],Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"location"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"search",placeholder:"请输入城市名称"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),a("div",{staticClass:"step-list"},[t.location.state.length?a("div",{staticClass:"step"},t._l(t.location.state,function(e){return a("div",{key:e.id,class:{active:e.id==t.current.city,item:"true"},on:{click:function(a){t.select(e,"city")}}},[t._v(t._s(e.name)+"\n            ")])})):t._e(),t.location.city.length?a("div",{staticClass:"step"},t._l(t.location.city,function(e){return a("div",{key:e.id,class:{active:e.id==t.current.region,item:"true"},on:{click:function(a){t.select(e,"region")}}},[t._v(t._s(e.name)+"\n            ")])})):t._e(),t.location.region.length?a("div",{staticClass:"step"},t._l(t.location.region,function(e){return a("div",{key:e.id,class:{active:e.id==t.current.region,item:"true"},on:{click:function(a){t.select(e)}}},[t._v(t._s(e.name))])})):t._e()])])},Qe=[],He=1,Ve={props:{onSelect:{}},data:function(){return{keyword:"",parent_id:null,location:{state:[],city:[],region:[]},current:{state:[],city:[],region:[]}}},methods:{select:function(t,e){var a;switch(this.current[e]=t.id,e){case"state":a="city";break;case"city":a="region";break}this.read_children_and_select(t,a)},read_children_and_select:function(t,e){var a=this;this.read(t.id,e).then(function(e){e.length&&"city"!=t.type||a.onSelect(t)})},read:function(t,e){var a=this;return this.parent_id=t,Q("location/read",{where:{and:{parent_id:t}}}).then(function(t){var i=t.data.data;return a.location[e]=i,i})},search:function(){var t=this;this.reset_location(),Q("location/search",{or:{name:this.keyword}}).then(function(e){t.group(e.data.data)})},reset_location:function(){this.location={state:[],city:[],region:[]}},group:function(t){var e=this;t.forEach(function(t){var a=e.location[t.type];a.push(t)})}},mounted:function(){this.read(He,"state")},watch:{keyword:function(){this.search()}}},Ge=Ve,We=(a("YQdl"),Object(u["a"])(Ge,Je,Qe,!1,null,"4288414e",null)),Xe=We.exports,Ze={components:{Dropdown:jt,Location:Xe},mixins:[Ie],mounted:function(){this.read_user(),this.read_brand(),this.read_model(),this.read_design()},data:function(){return{model:"vehicle",searchable:["title","description"],current:{preview:[]},user_list:[],brand_list:[],model_list:[],design_list:[]}},methods:{read_user:function(){var t=this;Q("user/read").then(function(e){t.user_list=e.data.data})},read_brand:function(){var t=this;Q("brand/read").then(function(e){t.brand_list=e.data.data})},read_model:function(){var t=this;Q("model/read").then(function(e){t.model_list=e.data.data})},read_design:function(){var t=this;Q("design/read").then(function(e){t.design_list=e.data.data})},set_publisher_id:function(t){this.$set(this.current,"user_id",t.id)},set_brand_id:function(t){this.$set(this.current,"brand_id",t.id)},set_model_id:function(t){this.$set(this.current,"model_id",t.id)},set_design_id:function(t){this.$set(this.current,"design_id",t.id)},set_location_id:function(t){this.$set(this.current,"location_id",t.id)},after_set_current:function(){this.current.preview=this.current.preview||[]}}},Ye=Ze,Ue=(a("yskM"),Object(u["a"])(Ye,Te,Be,!1,null,"3af091b9",null)),ta=Ue.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou(e)}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("品牌")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required|max_length:32",expression:"'required|max_length:32'"},{name:"model",rawName:"v-model",value:t.current.name,expression:"current.name"}],attrs:{type:"text"},domProps:{value:t.current.name},on:{input:function(e){e.target.composing||t.$set(t.current,"name",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},aa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("品牌管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品牌")]),a("th",[t._v("操作")])])}],ia={data:function(){return{model:"brand",searchable:["name"]}},mixins:[Ie]},na=ia,ra=(a("n6LJ"),Object(u["a"])(na,ea,aa,!1,null,"38dea202",null)),sa=ra.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou(e)}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("车辆型号")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required|max_length:32",expression:"'required|max_length:32'"},{name:"model",rawName:"v-model",value:t.current.name,expression:"current.name"}],attrs:{type:"text"},domProps:{value:t.current.name},on:{input:function(e){e.target.composing||t.$set(t.current,"name",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("所属品牌id")]),a("Dropdown",{attrs:{default:t.current.brand_id,list:t.brand_list,onSelect:t.set_brand_id}})],1),a("div",{staticClass:"input-control"},[a("label",[t._v("车辆类型")]),a("Dropdown",{attrs:{default:t.current.design_id,list:t.design_list,onSelect:t.set_design_id}})],1),a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.$brand?e.$brand.name:"-"))]),a("td",[t._v(t._s(e.$design?e.$design.name:"-"))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},ca=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("型号管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("车辆型号")]),a("th",[t._v("所属品牌")]),a("th",[t._v("车辆类型")]),a("th",[t._v("操作")])])}],la={data:function(){return{model:"model",brand_list:[],design_list:[],searchable:["name"],with:[{model:"brand",type:"has_one"},{model:"design",type:"has_one"}]}},components:{Dropdown:jt},methods:{read_brand:function(){var t=this;Q("brand/read").then(function(e){t.brand_list=e.data.data})},read_design:function(){var t=this;Q("design/read").then(function(e){t.design_list=e.data.data})},set_brand_id:function(t){this.$set(this.current,"brand_id",t.id)},set_design_id:function(t){this.$set(this.current,"design_id",t.id)}},mixins:[Ie],mounted:function(){this.read_brand(),this.read_design()}},ua=la,da=(a("/uby"),Object(u["a"])(ua,oa,ca,!1,null,"10b1c80d",null)),va=da.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-ba  r"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou(e)}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("车辆类型")]),a("input",{directives:[{name:"validator",rawName:"v-validator",value:"required|max_length:32",expression:"'required|max_length:32'"},{name:"model",rawName:"v-model",value:t.current.name,expression:"current.name"}],attrs:{type:"text"},domProps:{value:t.current.name},on:{input:function(e){e.target.composing||t.$set(t.current,"name",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},_a=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("车类管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("车辆类型")]),a("th",[t._v("操作")])])}],ma={data:function(){return{model:"design",searchable:["name"]}},mixins:[Ie]},ha=ma,fa=(a("KMSu"),Object(u["a"])(ha,pa,_a,!1,null,"cda5a452",null)),ga=fa.exports,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou(e)}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("地名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.name,expression:"current.name"}],attrs:{type:"text"},domProps:{value:t.current.name},on:{input:function(e){e.target.composing||t.$set(t.current,"name",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("行政级别")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.type,expression:"current.type"}],attrs:{type:"text"},domProps:{value:t.current.type},on:{input:function(e){e.target.composing||t.$set(t.current,"type",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",[t._v("上级id")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.parent_id,expression:"current.parent_id"}],attrs:{type:"number"},domProps:{value:t.current.parent_id},on:{input:function(e){e.target.composing||t.$set(t.current,"parent_id",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name||"-"))]),a("td",[t._v(t._s(e.type||"-"))]),a("td",[t._v(t._s(e.parent_id||"-"))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},ya=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("地址管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("地名")]),a("th",[t._v("行政级别")]),a("th",[t._v("上级id")]),a("th",[t._v("操作")])])}],Ca={data:function(){return{model:"location",searchable:["name","type","parent_id"]}},mixins:[Ie]},wa=Ca,ka=(a("K3C8"),Object(u["a"])(wa,ba,ya,!1,null,"fe541e06",null)),xa=ka.exports,$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])]),a("small",[t._v("共有"+t._s(t.total_check)+"个检测项")])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou()}}},[a("div",{staticClass:"input-control"},[a("Dropdown",{attrs:{api:{model:"vehicle",property:["title"]},placeholder:"请选择车辆",displayKey:"title",onSelect:t.set_vehicle_id}})],1),a("fieldset",{attrs:{disabled:!t.current.vehicle_id}},[a("div",{staticClass:"input-control"},[a("div",{staticClass:"btn-group"},[a("button",{attrs:{type:"button"},on:{click:function(e){t.check_all()}}},[t._v("全部通过")]),a("button",{attrs:{type:"button"},on:{click:function(e){t.check_random()}}},[t._v("随机通过")]),a("button",{attrs:{type:"button"},on:{click:function(e){t.clear_all()}}},[t._v("全部清空")])])]),a("div",[a("div",t._l(t.structure,function(e,i){return e.display_name?a("div",{key:e.id,staticClass:"input-control col-lg-4"},[a("label",{staticClass:"simple-checker",attrs:{for:"report-item"}},[t._v(t._s(e.display_name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current[i],expression:"current[key]"}],attrs:{type:"checkbox",id:"report-item"},domProps:{checked:Array.isArray(t.current[i])?t._i(t.current[i],null)>-1:t.current[i]},on:{change:function(e){var a=t.current[i],n=e.target,r=!!n.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);n.checked?o<0&&t.$set(t.current,i,a.concat([s])):o>-1&&t.$set(t.current,i,a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.current,i,r)}}})]):t._e()}))])]),a("div",{staticClass:"input-control"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[e.$vehicle?a("router-link",{attrs:{target:"_blank",to:"/detail/"+e.$vehicle.id}},[t._v("\n                          "+t._s(e.$vehicle.title)+"\n                        ")]):a("span",[t._v("-")])],1),a("td",[t._v(t._s(t.passed_count=t.compute_passed_check(e)))]),a("td",[t._v(t._s(t._f("percentage")(t.passed_count/t.total_check)))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},Na=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("质检管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("类目")]),a("th",[t._v("通过数")]),a("th",[t._v("通过率")]),a("th",[t._v("操作")])])}],Pa={components:{Dropdown:jt},mixins:[Ie],data:function(){return{structure:{},total_check:0,vehicle_list:[],model:"report",searchable:["title"],with:[{model:"vehicle",type:"has_one"}]}},mounted:function(){this.read(),this.get_structure()},methods:{set_vehicle_id:function(t){this.$set(this.current,"vehicle_id",t.id)},each_prop:function(t){for(var e in this.structure)if(this.structure.hasOwnProperty(e)){var a=this.structure[e];t&&t(a,e)}},check_all:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.each_prop(function(a,i){a.display_name&&t.$set(t.current,i,e)})},check_random:function(){var t=this;this.each_prop(function(e,a){if(e.display_name){var i=!!Math.round(Math.random());t.$set(t.current,a,i)}})},clear_all:function(){this.check_all(!1)},get_structure:function(){var t=this;Q("MODEL/FIND",{key:"report"}).then(function(e){t.structure=e.data.data.structure,t.compute_total_check()})},compute_total_check:function(){var t=0;this.each_prop(function(e){e.display_name&&t++}),this.total_check=t},compute_passed_check:function(t){var e=0;return t=t||this.current,this.each_prop(function(a,i){a.display_name&&t[i]&&e++}),e}},watch:{current:{deep:!0,handler:function(){this.compute_passed_check()}}}},qa=Pa,Ea=(a("1YH8"),Object(u["a"])(qa,$a,Na,!1,null,"1a93c793",null)),Sa=Ea.exports,Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Nav",{attrs:{"push-down":!0}}),a("div",{staticClass:"container row"},[a("div",{staticClass:"col-lg-3"},[a("AdminNav")],1),a("div",{staticClass:"col-lg-9 content"},[a("div",{staticClass:"header row"},[t._m(0),a("div",{staticClass:"col-lg-4 right"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.edit_pattern=!0}}},[t._v("添加")])])]),t.edit_pattern?t._e():a("div",{staticClass:"tool-bar"},[a("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("label",{attrs:{for:"search"}},[t._v("快速查找")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{id:"search",type:"search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("搜")])])]),t.edit_pattern?a("form",{on:{submit:function(e){e.preventDefault(),t.cou()}}},[a("div",{staticClass:"input-control"},[a("label",[t._v("预约人")]),a("Dropdown",{attrs:{api:{model:"user",property:["username","real_name"]},placeholder:"请选择用户",displayKey:"username",onSelect:t.set_user_id}})],1),a("div",{staticClass:"input-control"},[a("label",{attrs:{for:""}},[t._v("二手车")]),a("Dropdown",{attrs:{api:{model:"vehicle",property:["title","description"]},displayKey:"title",onSelect:t.set_vehicle_id}})],1),a("div",{staticClass:"input-control"},[a("label",{attrs:{for:""}},[t._v("预约时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.appointed_at,expression:"current.appointed_at"}],attrs:{type:"date"},domProps:{value:t.current.appointed_at},on:{input:function(e){e.target.composing||t.$set(t.current,"appointed_at",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("label",{attrs:{for:""}},[t._v("备注")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.remark,expression:"current.remark"}],domProps:{value:t.current.remark},on:{input:function(e){e.target.composing||t.$set(t.current,"remark",e.target.value)}}})]),a("div",{staticClass:"input-control"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[t._v("提交")]),a("button",{attrs:{type:"button"},on:{click:t.cancle}},[t._v("取消")])])])]):a("div",{staticClass:"table"},[a("table",[t._m(1),a("tbody",t._l(t.list,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.$user?e.$user.username:"-"))]),a("td",[t._v(t._s(e.$vehicle?e.$vehicle.title:"-"))]),a("td",[t._v(t._s(e.appointed_at))]),a("td",[t._v(t._s(e.remark))]),a("td",[a("button",{staticClass:"btn-primary",on:{click:function(a){t.set_current(e)}}},[t._v("编辑")]),a("button",{staticClass:"btn",on:{click:function(a){t.remove(e.id)}}},[t._v("删除")])])])}))])]),t.edit_pattern?t._e():a("Pagination",{attrs:{limit:t.limit,totalCount:t.total,"on-page-change":t.on_page_change}})],1)])],1)},Da=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 left"},[a("div",{staticClass:"title"},[t._v("预约管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("预约人")]),a("th",[t._v("二手车")]),a("th",[t._v("预约时间")]),a("th",[t._v("备注")]),a("th",[t._v("操作")])])}],ja={mixins:[Ie],data:function(){return{model:"appo",searchable:["remark"],with:[{model:"user",type:"has_one"},{model:"vehicle",type:"has_one"}]}},methods:{set_user_id:function(t){this.$set(this.current,"user_id",t.id)},set_vehicle_id:function(t){this.$set(this.current,"vehicle_id",t.id)}}},Aa=ja,Ma=(a("aGhG"),Object(u["a"])(Aa,Oa,Da,!1,null,"19b21e9d",null)),Fa=Ma.exports;r["a"].use(p["a"]),r["a"].config.productionTip=!1,r["a"].filter("only_day",function(t){return t?t.split(" ")[0]:t}),r["a"].filter("percentage",function(t){if(t)return(100*t).toFixed(2)+"%"});var Ia=new p["a"]({routes:[{path:"/",component:et,meta:{title:"首页-洋洋车"}},{path:"/signup",component:ot,meta:{title:"注册-洋洋车"}},{path:"/login",component:pt,meta:{title:"登录-洋洋车"}},{path:"/detail/:id",component:$t,meta:{title:"二手车详情-洋洋车"}},{path:"/search",component:Jt,meta:{title:"搜索-洋洋车"}},{path:"/publish",component:se,meta:{title:"发布二手车-洋洋车"}},{path:"/admin",component:ge,children:[{path:"user",meta:{title:"管理面板-洋洋车"},component:Re},{path:"vehicle",meta:{title:"管理面板-洋洋车"},component:ta},{path:"brand",meta:{title:"管理面板-洋洋车"},component:sa},{path:"model",meta:{title:"管理面板-洋洋车"},component:va},{path:"design",meta:{title:"管理面板-洋洋车"},component:ga},{path:"location",meta:{title:"管理面板-洋洋车"},component:xa},{path:"report",meta:{title:"管理面板-洋洋车"},component:Sa},{path:"appo",meta:{title:"管理面板-洋洋车"},component:Fa}]}]});Ia.beforeEach(function(t,e,a){var i=t.fullPath.startsWith("/admin/");if(i&&!_.is_admin())return alert("请先使用管理员账号登录，用户名：admin，密码：yoyoyo"),void a("/login");a(),document.title=t.meta.title}),new r["a"]({directives:{Focus:m},render:function(t){return t(v)},router:Ia}).$mount("#root")},YQdl:function(t,e,a){"use strict";var i=a("huO8"),n=a.n(i);n.a},a70I:function(t,e,a){"use strict";var i=a("gFct"),n=a.n(i);n.a},aGhG:function(t,e,a){"use strict";var i=a("Tb+F"),n=a.n(i);n.a},aQVd:function(t,e,a){"use strict";var i=a("hwr4"),n=a.n(i);n.a},"aQX+":function(t,e,a){},e3MH:function(t,e,a){},gFct:function(t,e,a){},"gU+5":function(t,e,a){},hsSA:function(t,e,a){},huO8:function(t,e,a){},hwr4:function(t,e,a){},iu94:function(t,e,a){"use strict";var i=a("OtS1"),n=a.n(i);n.a},"k6e/":function(t,e,a){},lEjJ:function(t,e,a){},lXEF:function(t,e,a){"use strict";var i=a("0dXs"),n=a.n(i);n.a},"m+tX":function(t,e,a){},n6LJ:function(t,e,a){"use strict";var i=a("IW1Z"),n=a.n(i);n.a},nhkA:function(t,e,a){},qqIC:function(t,e,a){"use strict";var i=a("y4uq"),n=a.n(i);n.a},r8WL:function(t,e,a){},rBkT:function(t,e,a){"use strict";var i=a("e3MH"),n=a.n(i);n.a},"re+p":function(t,e,a){"use strict";var i=a("k6e/"),n=a.n(i);n.a},"ri+a":function(t,e,a){"use strict";var i=a("lEjJ"),n=a.n(i);n.a},uLH6:function(t,e,a){},v3Rm:function(t,e,a){},xwx4:function(t,e,a){},y4uq:function(t,e,a){},y6fR:function(t,e,a){"use strict";var i=a("aQX+"),n=a.n(i);n.a},yskM:function(t,e,a){"use strict";var i=a("DLQb"),n=a.n(i);n.a},zro5:function(t,e,a){"use strict";var i=a("3Gdc"),n=a.n(i);n.a}});
//# sourceMappingURL=app.0ae81c2d.js.map